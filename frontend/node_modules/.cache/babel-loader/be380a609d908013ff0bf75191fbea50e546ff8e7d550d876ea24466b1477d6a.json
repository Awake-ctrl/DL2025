{"ast":null,"code":"import { __rest, __assign } from '../../node_modules/tslib/tslib.es6.js';\nimport React, { createContext, forwardRef, useRef, useState, useEffect, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from '../../_virtual/index.js';\nimport { CBackdrop } from '../backdrop/CBackdrop.js';\nimport { CConditionalPortal } from '../conditional-portal/CConditionalPortal.js';\nimport { CModalContent } from './CModalContent.js';\nimport { CModalDialog } from './CModalDialog.js';\nimport { useForkedRef } from '../../hooks/useForkedRef.js';\nimport '@popperjs/core';\nimport Transition from '../../node_modules/react-transition-group/esm/Transition.js';\nvar CModalContext = createContext({});\nvar CModal = forwardRef(function (_a, ref) {\n  var children = _a.children,\n    alignment = _a.alignment,\n    _b = _a.backdrop,\n    backdrop = _b === undefined ? true : _b,\n    className = _a.className,\n    container = _a.container,\n    _c = _a.duration,\n    duration = _c === undefined ? 150 : _c,\n    _d = _a.focus,\n    focus = _d === undefined ? true : _d,\n    fullscreen = _a.fullscreen,\n    _e = _a.keyboard,\n    keyboard = _e === undefined ? true : _e,\n    onClose = _a.onClose,\n    onClosePrevented = _a.onClosePrevented,\n    onShow = _a.onShow,\n    _f = _a.portal,\n    portal = _f === undefined ? true : _f,\n    scrollable = _a.scrollable,\n    size = _a.size,\n    _g = _a.transition,\n    transition = _g === undefined ? true : _g,\n    _h = _a.unmountOnClose,\n    unmountOnClose = _h === undefined ? true : _h,\n    visible = _a.visible,\n    rest = __rest(_a, [\"children\", \"alignment\", \"backdrop\", \"className\", \"container\", \"duration\", \"focus\", \"fullscreen\", \"keyboard\", \"onClose\", \"onClosePrevented\", \"onShow\", \"portal\", \"scrollable\", \"size\", \"transition\", \"unmountOnClose\", \"visible\"]);\n  var activeElementRef = useRef(null);\n  var modalRef = useRef(null);\n  var modalContentRef = useRef(null);\n  var forkedRef = useForkedRef(ref, modalRef);\n  var _j = useState(visible),\n    _visible = _j[0],\n    setVisible = _j[1];\n  var _k = useState(false),\n    staticBackdrop = _k[0],\n    setStaticBackdrop = _k[1];\n  var contextValues = {\n    visible: _visible,\n    setVisible: setVisible\n  };\n  useEffect(function () {\n    setVisible(visible);\n  }, [visible]);\n  useEffect(function () {\n    var _a;\n    if (_visible) {\n      activeElementRef.current = document.activeElement;\n      document.addEventListener('mouseup', handleClickOutside);\n      document.addEventListener('keydown', handleKeyDown);\n    } else {\n      (_a = activeElementRef.current) === null || _a === undefined ? undefined : _a.focus();\n    }\n    return function () {\n      document.removeEventListener('mouseup', handleClickOutside);\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [_visible]);\n  var handleDismiss = function () {\n    if (backdrop === 'static') {\n      return setStaticBackdrop(true);\n    }\n    setVisible(false);\n  };\n  useLayoutEffect(function () {\n    onClosePrevented && onClosePrevented();\n    setTimeout(function () {\n      return setStaticBackdrop(false);\n    }, duration);\n  }, [staticBackdrop]);\n  // Set focus to modal after open\n  useLayoutEffect(function () {\n    if (_visible) {\n      document.body.classList.add('modal-open');\n      if (backdrop) {\n        document.body.style.overflow = 'hidden';\n        document.body.style.paddingRight = '0px';\n      }\n      setTimeout(function () {\n        var _a;\n        focus && ((_a = modalRef.current) === null || _a === undefined ? undefined : _a.focus());\n      }, transition ? duration : 0);\n    } else {\n      document.body.classList.remove('modal-open');\n      if (backdrop) {\n        document.body.style.removeProperty('overflow');\n        document.body.style.removeProperty('padding-right');\n      }\n    }\n    return function () {\n      document.body.classList.remove('modal-open');\n      if (backdrop) {\n        document.body.style.removeProperty('overflow');\n        document.body.style.removeProperty('padding-right');\n      }\n    };\n  }, [_visible]);\n  var handleClickOutside = function (event) {\n    if (modalRef.current && modalRef.current == event.target) {\n      handleDismiss();\n    }\n  };\n  var handleKeyDown = function (event) {\n    if (event.key === 'Escape' && keyboard) {\n      handleDismiss();\n    }\n  };\n  return React.createElement(React.Fragment, null, React.createElement(Transition, {\n    in: _visible,\n    mountOnEnter: true,\n    nodeRef: modalRef,\n    onEnter: onShow,\n    onExit: onClose,\n    unmountOnExit: unmountOnClose,\n    timeout: transition ? duration : 0\n  }, function (state) {\n    return React.createElement(CConditionalPortal, {\n      container: container,\n      portal: portal\n    }, React.createElement(CModalContext.Provider, {\n      value: contextValues\n    }, React.createElement(\"div\", __assign({\n      className: classNames('modal', {\n        'modal-static': staticBackdrop,\n        fade: transition,\n        show: state === 'entered'\n      }, className),\n      tabIndex: -1\n    }, _visible ? {\n      'aria-modal': true,\n      role: 'dialog'\n    } : {\n      'aria-hidden': 'true'\n    }, {\n      style: __assign({}, state !== 'exited' && {\n        display: 'block'\n      })\n    }, rest, {\n      ref: forkedRef\n    }), React.createElement(CModalDialog, {\n      alignment: alignment,\n      fullscreen: fullscreen,\n      scrollable: scrollable,\n      size: size\n    }, React.createElement(CModalContent, {\n      ref: modalContentRef\n    }, children)))));\n  }), backdrop && React.createElement(CConditionalPortal, {\n    container: container,\n    portal: portal\n  }, React.createElement(CBackdrop, {\n    visible: _visible\n  })));\n});\nCModal.propTypes = {\n  alignment: PropTypes.oneOf(['top', 'center']),\n  backdrop: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['static'])]),\n  children: PropTypes.node,\n  className: PropTypes.string,\n  container: PropTypes.any,\n  // HTMLElement\n  duration: PropTypes.number,\n  focus: PropTypes.bool,\n  fullscreen: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['sm', 'md', 'lg', 'xl', 'xxl'])]),\n  keyboard: PropTypes.bool,\n  onClose: PropTypes.func,\n  onClosePrevented: PropTypes.func,\n  onShow: PropTypes.func,\n  portal: PropTypes.bool,\n  scrollable: PropTypes.bool,\n  size: PropTypes.oneOf(['sm', 'lg', 'xl']),\n  transition: PropTypes.bool,\n  unmountOnClose: PropTypes.bool,\n  visible: PropTypes.bool\n};\nCModal.displayName = 'CModal';\nexport { CModal, CModalContext };","map":{"version":3,"names":["CModalContext","createContext","CModal","forwardRef","_a","ref","children","alignment","_b","backdrop","undefined","className","container","_c","duration","_d","focus","fullscreen","_e","keyboard","onClose","onClosePrevented","onShow","_f","portal","scrollable","size","_g","transition","_h","unmountOnClose","visible","rest","__rest","activeElementRef","useRef","modalRef","modalContentRef","forkedRef","useForkedRef","_j","useState","_visible","setVisible","_k","staticBackdrop","setStaticBackdrop","contextValues","useEffect","current","document","activeElement","addEventListener","handleClickOutside","handleKeyDown","removeEventListener","handleDismiss","useLayoutEffect","setTimeout","body","classList","add","style","overflow","paddingRight","remove","removeProperty","event","target","key","React","createElement","Fragment","Transition","in","mountOnEnter","nodeRef","onEnter","onExit","unmountOnExit","timeout","state","CConditionalPortal","Provider","value","__assign","classNames","fade","show","tabIndex","role","display","CModalDialog","CModalContent","CBackdrop","propTypes","PropTypes","oneOf","oneOfType","bool","node","string","any","number","func","displayName"],"sources":["../../../../src/components/modal/CModal.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}